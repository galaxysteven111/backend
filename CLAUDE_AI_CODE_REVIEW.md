# Claude AI 代碼審查 Prompt（簡潔版）

你是一位資深的全棧開發專家，請對這個「香港捐飯盒平台」進行代碼審查和改進。

## 專案概述

**目標**：連接願意分享食物的捐贈者與需要幫助的人，減少食物浪費。

**技術棧**：
- 前端：React 18 + TypeScript + Vite + Tailwind CSS
- 後端：Node.js + Express + TypeScript + PostgreSQL + Knex.js
- 認證：JWT
- 狀態管理：Zustand
- 數據獲取：React Query + Axios

## 當前狀態

### 已實現功能
✅ 用戶註冊/登錄  
✅ 發布飯盒  
✅ 瀏覽飯盒列表  
✅ 申請飯盒  
✅ 申請管理（批准/拒絕）  
✅ 響應式設計  
✅ 底部導覽列  

### 已知問題
- 底部導覽列在某些情況下可能不顯示
- 缺少圖片上傳功能
- 缺少地圖顯示
- 表單驗證不夠完善
- 錯誤處理可以更友好

## 請完成以下任務

### 1. Bug 修復（優先級：高）
- [ ] 修復底部導覽列顯示問題
- [ ] 完善表單驗證（前端和後端）
- [ ] 改進錯誤處理和用戶提示
- [ ] 修復任何類型錯誤
- [ ] 修復潛在的安全漏洞

### 2. 功能實現（優先級：高）
- [ ] **地圖整合**：使用 Leaflet 顯示飯盒位置，支持地圖選點
- [ ] **圖片上傳**：允許上傳飯盒照片（使用 multer）
- [ ] **搜索篩選**：按地區、距離、時間篩選飯盒
- [ ] **通知系統**：申請狀態變更時顯示通知

### 3. 代碼改進（優先級：中）
- [ ] 提取可重用組件
- [ ] 添加錯誤邊界（Error Boundary）
- [ ] 優化性能（React.memo, useMemo）
- [ ] 完善 TypeScript 類型
- [ ] 添加 API 輸入驗證（使用 Zod）

### 4. 用戶體驗（優先級：中）
- [ ] 添加加載狀態
- [ ] 改進空狀態顯示
- [ ] 添加確認對話框
- [ ] 實時表單驗證

## 審查重點

1. **安全性**：SQL 注入、XSS、CSRF 防護
2. **性能**：數據庫查詢優化、前端渲染優化
3. **可維護性**：代碼結構、註釋、錯誤處理
4. **用戶體驗**：移動端適配、交互反饋

## 輸出格式

對於每個改進，請提供：
1. **問題描述**：發現了什麼問題
2. **影響範圍**：影響哪些功能
3. **解決方案**：如何修復
4. **代碼示例**：具體的修改代碼

## 審查優先級

**重要：請嚴格按照以下順序進行！**

### 🔴 階段 1：安全性 + Bug 修復（必須先完成）

**安全性修復：**
- JWT secret 處理和 fallback
- PATCH mass assignment 防護
- 輸入驗證和清理
- 速率限制
- SQL 注入和 XSS 防護

**Bug 修復：**
- 底部導覽列顯示問題
- 表單驗證不完善
- 錯誤處理不友好

### 🟡 階段 2：高優先級功能（完成階段 1 後）

- 地圖整合
- 圖片上傳
- 搜索篩選
- 通知系統

### 🟢 階段 3：代碼優化（最後）

- 代碼重構
- 性能優化
- UX 改進

---

## 開始審查

**請從階段 1 開始，完成後再進行階段 2 和 3。**
