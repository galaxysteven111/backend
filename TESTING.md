# 測試指南

## 快速測試步驟

### 1. 啟動開發服務器

#### 方法一：同時啟動前後端（推薦）
```bash
npm run dev
```

#### 方法二：分別啟動
```bash
# 終端 1 - 後端
npm run dev:backend

# 終端 2 - 前端
npm run dev:frontend
```

### 2. 訪問平台

- **桌面瀏覽器**：http://localhost:3000
- **後端 API**：http://localhost:3001
- **API 健康檢查**：http://localhost:3001/health

---

## 手機 H5 測試方法

### 方法一：使用本地網絡 IP（推薦）

1. **查找你的電腦 IP 地址**

   **Windows:**
   ```bash
   ipconfig
   # 找到 IPv4 地址，例如：192.168.1.100
   ```

   **Mac/Linux:**
   ```bash
   ifconfig
   # 或
   ip addr show
   ```

2. **確保手機和電腦在同一 WiFi 網絡**

3. **修改 Vite 配置允許外部訪問**

   編輯 `frontend/vite.config.ts`，添加 `host: '0.0.0.0'`：

   ```typescript
   server: {
     port: 3000,
     host: '0.0.0.0', // 允許外部訪問
     // ...
   }
   ```

4. **在手機瀏覽器訪問**
   ```
   http://你的IP地址:3000
   例如：http://192.168.1.100:3000
   ```

### 方法二：使用 ngrok（適合遠程測試）

1. **安裝 ngrok**
   ```bash
   # 下載並安裝 ngrok
   # https://ngrok.com/download
   ```

2. **啟動前端服務器**
   ```bash
   npm run dev:frontend
   ```

3. **在另一個終端運行 ngrok**
   ```bash
   ngrok http 3000
   ```

4. **使用 ngrok 提供的 URL**
   ```
   例如：https://abc123.ngrok.io
   在手機瀏覽器訪問這個 URL
   ```

### 方法三：使用瀏覽器開發者工具（模擬手機）

1. **Chrome/Edge 開發者工具**
   - 按 `F12` 打開開發者工具
   - 點擊設備圖標（或按 `Ctrl+Shift+M`）
   - 選擇設備型號（iPhone、Android等）
   - 調整屏幕尺寸測試

2. **Firefox 響應式設計模式**
   - 按 `Ctrl+Shift+M`
   - 選擇設備預設或自定義尺寸

---

## 完整測試流程

### 測試場景 1：用戶註冊和登錄

1. **訪問首頁**
   - 確認頁面正常加載
   - 檢查響應式布局

2. **註冊新帳號**
   - 點擊「註冊」按鈕
   - 填寫表單：
     - 姓名：測試用戶
     - 電子郵件：test@example.com
     - 密碼：123456
     - 地區：選擇一個香港地區
   - 提交註冊
   - 確認註冊成功並自動登錄

3. **登出**
   - 點擊「登出」按鈕
   - 確認返回首頁

4. **登錄**
   - 點擊「登入」
   - 使用剛才註冊的帳號登錄
   - 確認登錄成功

### 測試場景 2：發布飯盒

1. **登錄後發布飯盒**
   - 點擊「發布飯盒」
   - 填寫表單：
     - 標題：測試飯盒
     - 描述：這是一個測試飯盒
     - 數量：2
     - 地區：選擇地區
     - 緯度：22.3193（香港中心）
     - 經度：114.1694
     - 取餐地址：測試地址
     - 取餐時間：選擇未來時間
   - 提交
   - 確認發布成功

2. **查看發布的飯盒**
   - 點擊「瀏覽飯盒」
   - 確認能看到剛才發布的飯盒
   - 點擊查看詳情

### 測試場景 3：申請飯盒

1. **使用另一個帳號登錄**（或註冊新帳號）

2. **瀏覽飯盒**
   - 訪問飯盒列表
   - 點擊一個可用的飯盒

3. **申請飯盒**
   - 在詳情頁點擊「提交申請」
   - 可選填寫留言
   - 提交申請
   - 確認申請成功

4. **查看我的申請**
   - 點擊「我的申請」
   - 確認能看到剛才的申請
   - 確認狀態為「待審核」

### 測試場景 4：批准申請

1. **切換回捐贈者帳號**

2. **查看申請**（需要實現查看自己飯盒的申請功能）

3. **批准申請**
   - 點擊「批准」
   - 確認狀態更新

4. **切換回申請者帳號**
   - 查看「我的申請」
   - 確認狀態變為「已批准」

---

## 移動端專項測試

### 響應式布局測試

1. **導航欄**
   - [ ] 手機上顯示漢堡菜單圖標
   - [ ] 點擊漢堡菜單能打開/關閉
   - [ ] 菜單項能正常點擊
   - [ ] 桌面端顯示完整導航欄

2. **首頁**
   - [ ] 標題大小適中
   - [ ] 按鈕易於點擊
   - [ ] 功能卡片正確排列
   - [ ] 文字清晰可讀

3. **表單頁面**
   - [ ] 輸入框大小合適
   - [ ] 不會自動縮放（iOS）
   - [ ] 按鈕易於點擊
   - [ ] 表單能正常提交

4. **列表頁面**
   - [ ] 卡片單列顯示（手機）
   - [ ] 內容完整顯示
   - [ ] 點擊卡片能跳轉

5. **詳情頁面**
   - [ ] 信息完整顯示
   - [ ] 按鈕易於操作
   - [ ] 文字大小合適

### 觸控測試

- [ ] 按鈕點擊響應正常
- [ ] 鏈接點擊正常
- [ ] 表單輸入正常
- [ ] 滾動流暢
- [ ] 沒有意外的縮放

### 不同設備測試

建議測試以下設備/瀏覽器：

- [ ] iPhone Safari
- [ ] iPhone Chrome
- [ ] Android Chrome
- [ ] Android Firefox
- [ ] iPad Safari（橫屏/豎屏）

---

## API 測試

### 使用 curl 測試 API

```bash
# 健康檢查
curl http://localhost:3001/health

# 註冊
curl -X POST http://localhost:3001/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"123456","name":"測試用戶"}'

# 登錄（替換 TOKEN）
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"123456"}'

# 獲取飯盒列表
curl http://localhost:3001/api/food-boxes

# 獲取飯盒詳情（替換 ID）
curl http://localhost:3001/api/food-boxes/飯盒ID
```

### 使用 Postman/Insomnia

1. 導入 API 端點
2. 測試各個 API
3. 檢查響應數據

---

## 常見問題排查

### 問題：手機無法訪問

**解決方案：**
1. 確認電腦和手機在同一 WiFi
2. 檢查防火牆設置
3. 確認 Vite 配置了 `host: '0.0.0.0'`
4. 嘗試使用 IP 地址而非 localhost

### 問題：API 請求失敗

**解決方案：**
1. 確認後端服務器正在運行
2. 檢查 CORS 設置
3. 確認 API URL 配置正確
4. 檢查瀏覽器控制台錯誤

### 問題：數據庫連接失敗

**解決方案：**
1. 確認 PostgreSQL 正在運行
2. 檢查 `.env` 文件中的數據庫配置
3. 確認數據庫已創建
4. 運行遷移：`npm run db:migrate`

### 問題：頁面顯示異常

**解決方案：**
1. 清除瀏覽器緩存
2. 檢查瀏覽器控制台錯誤
3. 確認所有依賴已安裝
4. 重新啟動開發服務器

---

## 測試檢查清單

### 功能測試
- [ ] 用戶註冊
- [ ] 用戶登錄
- [ ] 發布飯盒
- [ ] 瀏覽飯盒列表
- [ ] 查看飯盒詳情
- [ ] 申請飯盒
- [ ] 查看我的申請
- [ ] 查看個人資料

### 移動端測試
- [ ] 導航欄響應式
- [ ] 頁面布局響應式
- [ ] 表單響應式
- [ ] 按鈕大小合適
- [ ] 文字清晰可讀
- [ ] 觸控操作正常

### 瀏覽器兼容性
- [ ] Chrome
- [ ] Firefox
- [ ] Safari
- [ ] Edge

### 性能測試
- [ ] 頁面加載速度
- [ ] API 響應速度
- [ ] 圖片加載（如果有）

---

## 下一步

完成基本測試後，可以：
1. 添加更多測試數據
2. 測試邊界情況
3. 進行壓力測試
4. 優化性能
5. 修復發現的問題
