# 🚀 立即開始部署

## 📋 在 Cursor 終端中執行以下命令

### 步驟 1：檢查 Railway CLI

**執行**：
```
railway --version
```

**結果判斷**：
- ✅ **如果顯示版本號**（例如：`railway version 3.x.x`）→ Railway CLI 已安裝，跳到步驟 2
- ❌ **如果顯示錯誤**（例如：`無法識別` 或 `command not found`）→ 需要安裝，執行下方安裝命令

**安裝 Railway CLI**：
```
iwr https://railway.app/install.ps1 -useb | iex
```

安裝完成後，再次執行 `railway --version` 確認。

---

### 步驟 2：登錄 Railway

**執行**：
```
railway login
```

這會打開瀏覽器，完成登錄後繼續。

---

### 步驟 3：進入後端目錄

**執行**：
```
cd backend
```

---

### 步驟 4：初始化 Railway 項目

**執行**：
```
railway init
```

**按照提示**：
- 選擇 `Create a new project`
- 輸入項目名稱：`foodbox-backend`（或你喜歡的名稱）

---

### 步驟 5：添加 PostgreSQL 數據庫

**執行**：
```
railway add postgresql
```

Railway 會自動創建數據庫並設置 `DATABASE_URL`。

---

### 步驟 6：生成 JWT_SECRET

**執行**：
```
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

**重要**：複製生成的密鑰（長字符串），下一步會用到！

---

### 步驟 7：設置環境變量

**執行**（將 `YOUR_JWT_SECRET` 替換為步驟 6 生成的密鑰）：
```
railway variables set NODE_ENV=production
railway variables set JWT_SECRET=YOUR_JWT_SECRET
railway variables set FRONTEND_URL=http://localhost:3000
```

**示例**：
```
railway variables set JWT_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6
```

---

### 步驟 8：部署應用

**執行**：
```
railway up
```

等待部署完成（約 2-5 分鐘）。看到 "Deployment successful" 或類似訊息表示完成。

---

### 步驟 9：運行數據庫遷移

**執行**：
```
railway run npm run migrate:prod
```

等待遷移完成。

---

### 步驟 10：獲取 API URL

**執行**：
```
railway domain
```

**如果沒有顯示 URL**，生成一個：
```
railway domain generate
railway domain
```

**記下這個 URL**，例如：`your-app.up.railway.app`

**API 基礎 URL** 是：`https://your-app.up.railway.app/api`

---

## ✅ 完成！

部署完成後，你會得到：
- **後端 API URL**: `https://your-app.up.railway.app/api`

---

## 🔄 下一步：部署前端

部署完後端後，告訴我你的 API URL，我會幫你部署前端！

或者繼續執行前端部署命令（需要先有後端 API URL）。

---

## 💡 提示

- 每個命令執行完後，等待完成再執行下一個
- 如果遇到錯誤，告訴我具體的錯誤訊息
- Railway 會自動設置 `DATABASE_URL`，無需手動設置
- `FRONTEND_URL` 可以先設置為 `http://localhost:3000`，部署前端後再更新

---

**現在開始執行步驟 1！** 🚀
